#!/usr/bin/env sh

# A .merlin must be present nearby the file.
# With dune it can be generated by calling `dune build @check`.

FILE="$1"

dune build @check
ocamlmerlin single dump -what ppxed-source -filename "$FILE" < "$FILE" | jq -r '.value' | ocamlformat --name="$FILE" -
